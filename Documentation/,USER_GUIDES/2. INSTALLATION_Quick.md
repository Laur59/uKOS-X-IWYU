#  Quick simple Arm installation for macOS & Ubuntu

(c) 2025-2026, Edo. Franzi, 2025-01-01

## Pre-requisite

### macOS

Prepare your environment as described in document **README.md**.

On your machine the following tools have to be installed. For programming or for debugging a target, **J-Link of Segger** is an alternative or a complement to openocd.

[**Xcode**](https://apps.apple.com/us/app/xcode/id497799835?mt=12/),  [**Macport**](https://www.macports.org/), [**J-Link**](https://www.segger.com/downloads/jlink/)

On your HD you should have the full uKOS-X package **OS_Kernel-X**. Then the following ports have to be installed:

```bash
sudo port install wget
sudo port install openocd
```

### Ubuntu

Prepare your environment as described in document **README.md**.

On your machine the following tools have to be installed. For programming or for debugging a target, **J-Link of Segger** is an alternative or a complement to openocd.

[**J-Link**](https://www.segger.com/downloads/jlink/)

C compiler and installation of some necessary packages Also check for presence of python executable.

```bash
sudo apt install -y build-essential
sudo apt install -y git
sudo apt install -y zlib1g-dev
sudo apt install -y libhidapi-dev
sudo apt install -y libudev-dev
sudo apt install -y openocd

# From the Segger page download J-Link
mkdir -p ${PATH_TOOLS_ROOT}/cross/SEGGER
cd ${PATH_TOOLS_ROOT}/cross/SEGGER

# For x86_64 based machines
tar xf ~/Downloads/JLink_Linux_V798f_x86_64.tgz
chmod a-w JLink_Linux_V798f_x86_64

# For Arm based machines
tar xf ~/Downloads/JLink_Linux_V798f_arm64.tgz
chmod a-w JLink_Linux_V798f_arm64

sudo cp JLink_Linux_V798f_*/99-jlink.rules /etc/udev/rules.d/99-jlink.rules
```

### Both, macOS & Ubuntu

For macOS and Ubuntu, the packages and tools are located in the folder chosen by the user and specified by the environment variable **PATH_TOOLS_ROOT** (e.g., *PATH_TOOLS_ROOT=/opt/uKOS*).
You need to create this folder with write access for administrators.
The folders must belong to a group shared by administrators, with read-write-execute rights for this group (use the **admin**group on macOS, and the **adm** group on Ubuntu).
The folder tree used is as follows:

```bash
/opt/uKOS -> ${PATH_TOOLS_ROOT}
/cross			 The final location of the build packages
```

#### Setting up your environment

Necessary settings for the environment:

```bash
PATH_TOOLS_ROOT	path to the development tools (GCC, etc.)
```

and updating PATH to access the toolchains.

Copy the following lines in  .bash_profile (**Ubuntu**) or .zprofile (**macOS**) or any file that you shall source before using uKOS-X.

#### Tool environment

Typically to install in /opt/uKOS

```bash
export PATH_TOOLS_ROOT=/opt/uKOS
export PATH_TOOLS_GCC=${PATH_TOOLS_ROOT}
export PATH_GCC_ARM=${PATH_TOOLS_GCC}/cross/gcc-15.2.0/arm

PATH=${PATH}:${PATH_GCC_ARM}/bin
export PATH
```

Once these variables have been defined, create the destination directories:

##### macOS

```bash
umask 002
sudo mkdir -p ${PATH_TOOLS_ROOT}
sudo chgrp admin ${PATH_TOOLS_ROOT}
sudo chmod g+w ${PATH_TOOLS_ROOT}
```

##### Ubuntu

```bash
umask 002
sudo mkdir -p ${PATH_TOOLS_ROOT}
sudo chgrp adm ${PATH_TOOLS_ROOT}
sudo chmod g+w ${PATH_TOOLS_ROOT}
```

### Getting tools for uKOS-X projects based on the Arm package

Install the compiler binary Arm toolchain.

##### macOS

```bash
cd /tmp

# For x86_64 based machines (gcc-14.2 is the last x86 supported)

wget https://developer.arm.com/-/media/Files/downloads/gnu/14.2.rel1/binrel/arm-gnu-toolchain-14.2.rel1-darwin-x86_64-arm-none-eabi.tar.xz
tar xf arm-gnu-toolchain-14.2.rel1-darwin-x86_64-arm-none-eabi.tar.xz
mkdir -p ${PATH_TOOLS_ROOT}/cross/gcc-14.2.0/arm
cp -R ./arm-gnu-toolchain-14.2.rel1-darwin-x86_64-arm-none-eabi/* ${PATH_TOOLS_ROOT}/cross/gcc-14.2.0/arm

# For Arm based machines
wget https://developer.arm.com/-/media/Files/downloads/gnu/14.3.rel1/binrel/arm-gnu-toolchain-14.3.rel1-darwin-arm64-arm-none-eabi.tar.xz
tar xf arm-gnu-toolchain-14.3.rel1-darwin-arm64-arm-none-eabi.tar.xz
mkdir -p ${PATH_TOOLS_ROOT}/cross/gcc-14.3.0/arm
cp -R ./arm-gnu-toolchain-14.3.rel1-darwin-arm64-arm-none-eabi/* ${PATH_TOOLS_ROOT}/cross/gcc-14.3.0/arm
```

##### Ubuntu

```bash
cd /tmp

# For x86_64 based machines
wget https://developer.arm.com/-/media/Files/downloads/gnu/14.3.rel1/binrel/arm-gnu-toolchain-14.3.rel1-x86_64-arm-none-eabi.tar.xz
tar xf arm-gnu-toolchain-14.3.rel1-x86_64-arm-none-eabi.tar.xz
mkdir -p ${PATH_TOOLS_ROOT}/cross/gcc-14.3.0/arm
cp -r ./arm-gnu-toolchain-14.3.rel1-x86_64-arm-none-eabi/* ${PATH_TOOLS_ROOT}/cross/gcc-14.3.0/arm

# For Arm based machines
wget https://developer.arm.com/-/media/Files/downloads/gnu/14.3.rel1/binrel/arm-gnu-toolchain-14.3.rel1-aarch64-arm-none-eabi.tar.xz.asc
tar xf arm-gnu-toolchain-14.3.rel1-aarch64-arm-none-eabi.tar.xz
mkdir -p ${PATH_TOOLS_ROOT}/cross/gcc-14.3.0/arm
cp -r ./arm-gnu-toolchain-14.3.rel1-aarch64-arm-none-eabi/* ${PATH_TOOLS_ROOT}/cross/gcc-14.3.0/arm
```
