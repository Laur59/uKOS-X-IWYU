From c77d45d52ed442be22dbce3b89083216988cda87 Mon Sep 17 00:00:00 2001
From: Laur59 <148864407+Laur59@users.noreply.github.com>
Date: Mon, 23 Jun 2025 18:59:41 +0300
Subject: [PATCH 2/3] Suppress aarch64 from multi-lib

---
 .../embedded/arm-multilib/json/multilib.json  | 120 ------------------
 .../arm-multilib/multilib-generate.py         |   2 +-
 2 files changed, 1 insertion(+), 121 deletions(-)

diff --git a/arm-software/embedded/arm-multilib/json/multilib.json b/arm-software/embedded/arm-multilib/json/multilib.json
index b980c2de40ec..d79d246706cf 100644
--- a/arm-software/embedded/arm-multilib/json/multilib.json
+++ b/arm-software/embedded/arm-multilib/json/multilib.json
@@ -1,125 +1,5 @@
 {
     "libs": [
-        {
-            "variant": "aarch64a_exn_rtti_unaligned",
-            "json": "aarch64a_exn_rtti_unaligned.json",
-            "flags": "--target=aarch64-unknown-none-elf"
-        },
-        {
-            "variant": "aarch64a_unaligned",
-            "json": "aarch64a_unaligned.json",
-            "flags": "--target=aarch64-unknown-none-elf -fno-exceptions -fno-rtti"
-        },
-        { 
-            "variant": "aarch64a_be_exn_rtti",
-            "json": "aarch64a_be_exn_rtti.json",
-            "flags": "--target=aarch64_be-unknown-none-elf"
-        },
-        {
-            "variant": "aarch64a_be",
-            "json": "aarch64a_be.json",
-            "flags": "--target=aarch64_be-unknown-none-elf -fno-exceptions -fno-rtti"
-        },
-        {
-            "variant": "aarch64a_exn_rtti",
-            "json": "aarch64a_exn_rtti.json",
-            "flags": "--target=aarch64-unknown-none-elf -mno-unaligned-access"
-        },
-        {
-            "variant": "aarch64a",
-            "json": "aarch64a.json",
-            "flags": "--target=aarch64-unknown-none-elf -mno-unaligned-access -fno-exceptions -fno-rtti"
-        },
-        {
-            "variant": "aarch64a_soft_nofp_exn_rtti",
-            "json": "aarch64a_soft_nofp_exn_rtti.json",
-            "flags": "--target=aarch64-unknown-none-elf -march=armvX+nofp -march=armvX+nosimd -mabi=aapcs-soft",
-            "libraries_supported": "picolibc"
-        },
-        {
-            "variant": "aarch64a_soft_nofp",
-            "json": "aarch64a_soft_nofp.json",
-            "flags": "--target=aarch64-unknown-none-elf -march=armvX+nofp -march=armvX+nosimd -mabi=aapcs-soft -fno-exceptions -fno-rtti",
-            "libraries_supported": "picolibc"
-        },
-        {
-            "variant": "aarch64a_be_soft_nofp_exn_rtti",
-            "json": "aarch64a_be_soft_nofp_exn_rtti.json",
-            "flags": "--target=aarch64_be-unknown-none-elf -march=armvX+nofp -march=armvX+nosimd -mabi=aapcs-soft",
-            "libraries_supported": "picolibc"
-        },
-        {
-            "variant": "aarch64a_be_soft_nofp",
-            "json": "aarch64a_be_soft_nofp.json",
-            "flags": "--target=aarch64_be-unknown-none-elf -march=armvX+nofp -march=armvX+nosimd -mabi=aapcs-soft -fno-exceptions -fno-rtti",
-            "libraries_supported": "picolibc"
-        },
-        {
-            "variant": "aarch64r_exn_rtti_unaligned",
-            "json": "aarch64r_exn_rtti_unaligned.json",
-            "flags": "--target=aarch64-unknown-none-elf -march=armv8-r"
-        },
-        {
-            "variant": "aarch64r_unaligned",
-            "json": "aarch64r_unaligned.json",
-            "flags": "--target=aarch64-unknown-none-elf -march=armv8-r -fno-exceptions -fno-rtti"
-        },
-        {
-            "variant": "aarch64r_be_exn_rtti",
-            "json": "aarch64r_be_exn_rtti.json",
-            "flags": "--target=aarch64_be-unknown-none-elf -march=armv8-r"
-        },
-        {
-            "variant": "aarch64r_be",
-            "json": "aarch64r_be.json",
-            "flags": "--target=aarch64_be-unknown-none-elf -march=armv8-r -fno-exceptions -fno-rtti"
-        },
-        {
-            "variant": "aarch64r_exn_rtti",
-            "json": "aarch64r_exn_rtti.json",
-            "flags": "--target=aarch64-unknown-none-elf -march=armv8-r -mno-unaligned-access"
-        },
-        {
-            "variant": "aarch64r",
-            "json": "aarch64r.json",
-            "flags": "--target=aarch64-unknown-none-elf -march=armv8-r -fno-exceptions -fno-rtti -mno-unaligned-access"
-        },
-        {
-            "variant": "aarch64r_soft_nofp_exn_rtti_unaligned",
-            "json": "aarch64r_soft_nofp_exn_rtti_unaligned.json",
-            "flags": "--target=aarch64-unknown-none-elf -march=armv8-r -march=armvX+nofp -march=armvX+nosimd -mabi=aapcs-soft",
-            "libraries_supported": "picolibc"
-        },
-        {
-            "variant": "aarch64r_soft_nofp_unaligned",
-            "json": "aarch64r_soft_nofp_unaligned.json",
-            "flags": "--target=aarch64-unknown-none-elf -march=armv8-r -march=armvX+nofp -march=armvX+nosimd -fno-exceptions -fno-rtti -mabi=aapcs-soft",
-            "libraries_supported": "picolibc"
-        },
-        {
-            "variant": "aarch64r_soft_nofp_exn_rtti",
-            "json": "aarch64r_soft_nofp_exn_rtti.json",
-            "flags": "--target=aarch64-unknown-none-elf -march=armv8-r -march=armvX+nofp -march=armvX+nosimd -mabi=aapcs-soft -mno-unaligned-access",
-            "libraries_supported": "picolibc"
-        },
-        {
-            "variant": "aarch64r_soft_nofp",
-            "json": "aarch64r_soft_nofp.json",
-            "flags": "--target=aarch64-unknown-none-elf -march=armv8-r -march=armvX+nofp -march=armvX+nosimd -fno-exceptions -fno-rtti -mabi=aapcs-soft -mno-unaligned-access",
-            "libraries_supported": "picolibc"
-        },
-        {
-            "variant": "aarch64r_be_soft_nofp_exn_rtti",
-            "json": "aarch64r_be_soft_nofp_exn_rtti.json",
-            "flags": "--target=aarch64_be-unknown-none-elf -march=armv8-r -march=armvX+nofp -march=armvX+nosimd -mabi=aapcs-soft",
-            "libraries_supported": "picolibc"
-        },
-        {
-            "variant": "aarch64r_be_soft_nofp",
-            "json": "aarch64r_be_soft_nofp.json",
-            "flags": "--target=aarch64_be-unknown-none-elf -march=armv8-r -march=armvX+nofp -march=armvX+nosimd -fno-exceptions -fno-rtti -mabi=aapcs-soft",
-            "libraries_supported": "picolibc"
-        },
         {
             "variant": "armv4t_exn_rtti",
             "json": "armv4t_exn_rtti.json",
diff --git a/arm-software/embedded/arm-multilib/multilib-generate.py b/arm-software/embedded/arm-multilib/multilib-generate.py
index c7ea84c6e093..2761f3010ae9 100755
--- a/arm-software/embedded/arm-multilib/multilib-generate.py
+++ b/arm-software/embedded/arm-multilib/multilib-generate.py
@@ -236,7 +236,7 @@ def get_extension_list(clang, triple):
 
 
 def generate_extensions(args):
-    aarch64_features = get_extension_list(args.clang, "aarch64-none-eabi")
+    aarch64_features = get_extension_list(args.clang, "arm-none-eabi")
     aarch32_features = get_extension_list(args.clang, "arm-none-eabi")
     all_features = list(aarch64_features)
     # Combine the aarch64 and aarch32 lists without duplication.
-- 
2.39.5 (Apple Git-154)

